<?xml version="1.0" encoding="utf-8"?>
<!--
  ~ Copyright 1998-2009 Linux.org.ru
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->

<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 2.6//EN"
    "http://tuckey.org/res/dtds/urlrewrite2.6.dtd">

<!--

    Configuration file for UrlRewriteFilter
    http://tuckey.org/urlrewrite/

-->
<urlrewrite>
  <rule>
    <from>^/index.jsp$</from>
    <to type="redirect">/</to>
  </rule>

<!--  <rule>
    <from>^/news$</from>
    <to type="redirect">/news/</to>
  </rule>

  <rule>
    <from>^/news/$</from>
    <to>/view-news.jsp?section=1</to>
  </rule>
-->
  <rule>
    <from>^/info.html$</from>
    <to type="redirect">/books</to>
  </rule>

  <rule>
    <from>^/info-mirror.html$</from>
    <to type="redirect">/books</to>
  </rule>

  <rule>
    <from>^/rss.jsp$</from>
    <to type="redirect">/section-rss.jsp</to>
  </rule>

  <rule>
    <from>^/rss.xml$</from>
    <to type="redirect">/section-rss.jsp</to>
  </rule>
  <rule>
    <from>^/profile/([^/]+)/(.*)$</from>
    <to type="redirect">/$2</to>
  </rule>

  <rule>
    <condition name="host" operator="notequal">^www\.linux\.org\.ru</condition>
    <condition name="host" operator="notequal">^beta\.linux\.org\.ru</condition>
    <condition name="host" operator="notequal">^test-lor</condition>
    <condition name="host" operator="notequal">^$</condition>
    <from>^/(.*)</from>
    <to type="redirect" last="true">http://www.linux.org.ru/$1</to>
  </rule>

  <rule>
    <from>\.(css|js)$</from>
    <set type="response-header" name="Cache-Control">max-age=3600</set>
  </rule>

  <rule>
    <from>\.(gif)|(jpg)|(png)$</from>
    <set type="response-header" name="Cache-Control">max-age=315360000</set>
  </rule>

</urlrewrite>

